
## 一、先给结论（可以直接写进设计原则）

> **做语义理解之前，不“必须”完成质量检测；
> 但如果完全不做任何质量感知，语义理解的准确性会显著下降。**

更精确地说：

> ✅ **语义理解 ≠ 依赖质量检测才能开始**
> ✅ **但高质量的语义理解，必须“感知质量信号”**

所以正确策略不是 **“先做质量 or 不做质量”**，而是：

> **在语义理解阶段，轻量引入“语义相关的质量信号”，
> 而不是完整质量治理。**

---

## 二、为什么“不做任何质量感知”会影响语义理解准确性？

我先用**你们产品里的真实语义判断场景**来说明。

### 1️⃣ 字段语义理解本质在判断什么？

在 v2.4 的设计里，字段语义理解主要在判断：

* 这个字段 **是不是标识 / 状态 / 时间 / 度量**
* 它的值域是否稳定
* 它是否可以被当作“语义锚点”

这些判断 **并不是纯靠字段名完成的**。

---

### 2️⃣ 如果没有质量信号，会发生的典型误判

#### ❌ 场景一：主键 / 标识误判

```text
字段名：user_id
```

如果不看质量：

* AI / 规则会倾向判断为 Identifier

但如果有质量信号：

* 空值率 20%
* 重复率 15%

👉 **它就不再是可靠的主标识**

---

#### ❌ 场景二：状态字段误判

```text
字段名：status
```

如果不看质量：

* 看起来是状态

但如果质量结果显示：

* 实际值 300+ 种
* 无明显枚举收敛

👉 更可能是：

* 原始日志字段
* 或“脏状态字段”

---

#### ❌ 场景三：时间字段误判

```text
字段名：create_time
```

但质量信号：

* 90% 为 NULL
* 时间分布异常（未来时间）

👉 语义可信度必须下调。

---

## 三、那是不是要“先完整做一轮质量检测”？——**不需要，也不推荐**

### 为什么不推荐？

1. **完整质量检测成本高**
2. **语义理解阶段不需要知道“所有质量问题”**
3. 会把语义理解拖成“重治理流程”，影响体验

👉 所以答案是：

> **不是“质量检测先行”，而是“质量信号前置”**

---

## 四、语义理解阶段，真正“需要”的质量信号有哪些？

下面这部分是**工程可落地的关键**。

---

## 五、支持语义理解的「最小质量信号集（MVP）」【强烈推荐】

> 这些不是完整质量规则，而是 **Profile + 轻规则**。

### 1️⃣ 空值率（Null Ratio） ✅ 必须

**用途**

* 判断字段是否“核心”
* 判断 Identifier / 必填属性合理性

**阈值示例**

```text
null_ratio < 1%    → 强支持 Identifier
null_ratio > 20%   → 降低语义置信度
```

---

### 2️⃣ 唯一性（Distinct / Duplicate） ✅ 必须

**用途**

* 判断主键 / 编码字段
* 判断枚举 vs 自由文本

**信号**

* distinct_count
* duplicate_ratio

---

### 3️⃣ 值域规模（Cardinality） ✅ 必须

**用途**

* 区分：

  * 状态字段（小枚举）
  * 类型字段
  * ID / 编码字段

---

### 4️⃣ 值分布稳定性（Distribution） ✅ 推荐

**用途**

* 判断字段是否“业务稳定语义”
* 排除日志 / 原始数据字段

---

### 5️⃣ 类型一致性（Type Consistency） ✅ 推荐

**用途**

* 发现：

  * 时间字段被字符串污染
  * 数值字段夹杂文本

---

### 6️⃣ 基础格式匹配（Regex / Pattern） ✅ 可选

**用途**

* 辅助识别：

  * 身份证
  * 手机号
  * 编码规则

---

## 六、这些质量信号在系统中“应该怎么用”？（非常关键）

### ❌ 错误做法

* 把这些当成“质量规则”
* 要求全部通过才能语义理解

---

### ✅ 正确做法（你们应该这样实现）

### 1️⃣ 把它们定义为：**语义质量信号（Semantic Quality Signals）**

它们的作用是：

* 调整语义 Suggestion 的 **confidence**
* 作为 AI 推理 / 规则推断的证据
* 给人工 Review 提供“风险提示”

---

### 2️⃣ 在语义理解页面如何呈现？

在字段语义理解页：

* 不展示完整质量报告
* 只展示：

  * `⚠ 空值率高`
  * `⚠ 唯一性不足`
  * `✓ 枚举值稳定`

👉 **提示，不裁决**

---

## 七、如果完全不做这些质量信号，会发生什么？（实话）

| 情况   | 结果         |
| ---- | ---------- |
| 不看空值 | 主键误判       |
| 不看重复 | 编码/ID混淆    |
| 不看值域 | 状态字段误判     |
| 不看分布 | 把日志字段当业务字段 |

👉 这些错误 **会被放大到业务对象、质量、安全、问数**。

---

## 八、你现在这套平台的「最佳实践路径」

结合你已有能力，我给你一个**完全匹配你们现状的建议顺序**：

```text
资产扫描 / Profile
        ↓
语义理解（使用轻量质量信号）
        ↓
语义裁决
        ↓
完整质量治理（规则 + 检测）
        ↓
安全治理
        ↓
语义版本
```

---

## 九、你可以直接写进 PRD 的一句话

> **语义理解不依赖完整质量检测，
> 但必须使用最小质量信号集作为语义判断的证据与风险提示。**


