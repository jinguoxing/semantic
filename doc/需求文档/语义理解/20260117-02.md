# 逻辑视图列表页优化（UI 结构与交互细节）

日期：2026-01-17

## 目标
- 列表层面形成“治理驱动视图”，支持排序与筛选。
- 批量语义理解引入 Run 弹层，明确采样/版本/队列等运行语义。
- 状态与文案统一为 S0/S1/S3，消除“理解完成即治理完成”的误导。

## 页面结构

### 顶部区域
- 标题：逻辑视图列表
- 说明文本：当前筛选条件（数据源/关键词）
- 搜索框：支持表名/业务名关键字

### 列表列定义
- 逻辑视图名称
- 业务名称
- 所属数据源
- 行数
- 更新时间
- 治理状态（S0/S1/S3）
- 待Review字段数
- 门槛未通过数（Gate）
- 风险项数

说明：暂不展示“表/视图”类型。

### 批量操作条（置顶 Sticky）
- 左侧：全选 + 已选数量
- 右侧主按钮：
  - 未勾选：批量生成建议（0）置灰
  - 已勾选：批量生成建议（N）启用
- 右侧提示：预计耗时 2~3 分钟 · 采样 10k 行/表 · 队列 2/5
- info tooltip 说明采样/版本/并发/队列含义

## Run 弹层（生成建议 Run）
触发：点击“批量生成建议（N）”。

内容结构：
- 基础信息：
  - 采样行数（可配置）
  - 规则版本（只读）
  - 模型版本（只读）
- 运行资源：
  - 预计耗时
  - 并发队列/排队位置
- 运行动作：
  - 确认后生成 run_id
  - 进入运行中状态

### Run 状态展示
- 列表行显示最近一次 run 状态：运行中 / 完成 / 失败
- hover 显示 run 摘要：采样/版本/耗时
- 失败状态显示原因（tooltip）

## 状态与操作

### 治理状态（表级）
- S0 未理解
- S1 建议已生成
- S3 已确认生效

### 行级主操作
- S0：提示“未理解”，主操作为“进入理解”
- S1：主操作为“进入 Review”
- S3：主操作为“发布/生效/生成对象”

## 排序与筛选

### 排序
- 待Review字段数
- 门槛未通过数（Gate）
- 风险项数

### 筛选 chips
- 只看待Review
- 只看 Gate 未通过
- 只看高风险

## 为空与异常状态
- S0 未理解的三列指标显示“—”
- 无结果时显示空状态 + 清除筛选
- Run 失败显示失败原因提示

## 文案规范
- 禁止使用“语义理解完成”作为状态
- 统一使用“建议已生成 / 待Review / 已确认生效”
- Run 相关动作统一用“生成建议 Run”

