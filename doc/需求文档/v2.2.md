这是一次非常精彩的深度反馈！你敏锐地捕捉到了当前设计中两个最核心的**逻辑一致性**和**认知冲突**问题。

这两个问题如果不解决，用户（特别是专业的数据管理人员）会立刻对平台的专业性产生怀疑。

你的建议非常专业且具有建设性，特别是“物理主键 vs 语义主键”的区分，以及“敏感口径自下而上统一”的思路，是成熟数据治理产品的标配。

我完全采纳你的建议，并基于此对 V2.1 设计规范进行**紧急修正 (V2.2)**。

---

# 企业级 AI 语义治理平台 (V2.2) 设计规范修订 - 核心逻辑一致性专项

### 🛑 修订点一：解决“主键缺失”与“标识符已识别”的认知冲突

**核心问题：** AI 一边说找到了标识符 (`user_id`)，一边又报“主键缺失”的红旗，用户会觉得 AI 精神分裂，从而丧失信任。

**解决方案：引入“双主键”概念，并提供转化行动点。**

我们必须在 UI 和底层逻辑上明确区分 **DB 约束** 和 **业务语义**。

#### 1. 概念定义 (后端/元数据层)

* **物理主键 (Physical PK):** 数据库层面的约束 (Primary Key Constraint)。*特征：强一致性保障，但数仓中常缺失。*
* **语义主键 (Semantic ID / Logical Key):** 业务上用于唯一标识实体的字段。*特征：业务认定，通常需要数据质量规则来保障唯一性。*

#### 2. UI 改造：综合语义结论页 (图 5 改)

**目标：** 质量证据卡片不能再笼统地报“红旗”，必须精确区分两种主键的状态。

* **旧版质量卡片：** `⚠️ 主键缺失` (红色警告)
* **新版质量卡片 (V2.2)：** 采用分层状态展示。

> **[🩺 质量画像]**
> | 维度 | 状态 | 说明 |
> | --- | --- | --- |
> | **物理主键** | <span style="color:gray">未配置 (None)</span> | 数据库无 PK 约束。 |
> | **语义主键** | ✅ **已识别 (`user_id`)** | AI 置信度 高。 |
> 
> 
> **结论：** 卡片整体状态应为 **[良好/通过]** (绿色)，因为业务上能找到主键是最重要的。

#### 3. UI 改造：语义理解引擎详情页 (图 7 改)

**目标：** 将 AI 的识别结果转化为治理行动。

* **字段列表中的表现：**
* `user_id` 的角色显示为 `🔗 标识符 (语义建议)`。


* **新增行动点 (Actionable Insight)：**
* 在页面顶部或 `user_id` 字段旁，增加一个醒目的提示/按钮：
* **【治理建议】 AI 识别到 `user_id` 为语义主键。是否采纳？**
* **[采纳并应用] 按钮行为：**
1. 在元数据中将 `user_id` 正式标记为该表的**逻辑主键**。
2. (可选) 自动在数据质量模块创建一条**“唯一性校验”规则**并绑定到该字段。





---

### 🛑 修订点二：解决敏感识别口径不一致与不可解释问题

**核心问题：** 详情页看着有敏感字段，汇总页却说没有，或者数据对不上。且用户不知道为什么被判定为 PII。

**解决方案：建立“自下而上”的强一致性统计口径，并提供依据透视。**

必须遵循 **“字段定性 -> 表级汇总”** 的唯一路径，杜绝两边数据源不一致。

#### 1. 统计口径统一 (后端逻辑)

1. **Step 1 字段级打标：** AI/规则引擎先扫描每个字段，打上标签（如 `mobile` -> `[L3, PII-手机号, 依据:正则]`）。
2. **Step 2 表级聚合：**
* `表级敏感字段数` = `count(敏感等级 >= L2 的字段)`。
* `表级最高密级` = `max(所有字段的敏感等级)`。
* `表级 PII 标签` = 只要任一字段含 PII 标签，表即打上 PII 标签。



#### 2. UI 改造：语义理解结果审核页 (图 6 改) & 详情页 (图 7 改)

**目标：** 字段列表中的信息必须完整、清晰。

* **字段行样式优化：**
* **旧版：** `mobile | L3 敏感`
* **新版 (V2.2)：**
* **[🔒 L3 敏感]** (红色胶囊) + **[📱 PII-手机号]** (蓝色/灰色细分类型的胶囊)。
* **Hover 交互：** 鼠标悬停在标签上，显示依据：“命中规则：通用手机号正则 (R_Mobile_CN)”。





#### 3. UI 改造：综合语义结论页 (图 5 改)

**目标：** 安全证据卡片的数据必须是下方详情页的精准汇总，且可解释。

* **旧版安全卡片：** `L2 公开` | `0 个敏感字段 / 包含 PII 数据` (数据打架)
* **新版安全卡片 (V2.2)：** 强调最高等级和来源透视。

> **[🛡️ 安全合规]**
> **最高密级：** <span style="background:#fff1f0; color:#f5222d; border:1px solid #ffa39e; padding: 2px 5px; border-radius: 4px;">🔒 L3 敏感</span>
> **敏感详情：**
> * 共发现 **2** 个敏感字段。
> * 包含 **PII (个人隐私)** 数据。
> 
> 
> **[交互] 透视来源 (Hover/点击展开)：**
> > * `mobile`: [L3] [PII-手机号] (依据: 正则)
> > * `id_card`: [L3] [PII-证件] (依据: AI推断)
> > 
> > 
> 
> 

---

### 总结

这次迭代修复了两个逻辑上的“硬伤”。

通过引入 **“双主键视角”** 和 **“强一致性敏感汇总”**，我们的平台在专业度和可信度上提升了一个巨大的台阶。它不再是一个简单的 AI 展示屏，而是一个逻辑严密、可以辅助严肃治理决策的专业工具。