# 实施计划 - 字段级语义理解工作台 (v2.4)

## 目标
实现“字段级语义理解工作台”，作为一个跨表的字段治理调度中心，支持批量生成建议、快速筛选高风险字段，并能精确定位到逻辑视图详情页进行裁决。

## 拟定变更

### 1. 新增页面：FieldSemanticWorkbenchView
- **位置**: `src/views/FieldSemanticWorkbenchView.tsx`
- **路由**: `activeModule = 'field_semantic'` (需在 `App.tsx` 中注册)
- **核心模块**:
    - **Header**:
        - 标题：字段语义理解（工作台）
        - 统计卡：待确认字段、高风险字段、今日已确认、阻塞字段。
        - 主操作：批量生成【语义建议】、批量接受高置信度。
    - **FilterBar**:
        - 筛选维度：逻辑视图、表名搜索、语义状态、风险等级。
    - **FieldTodoTable**:
        - 数据源：聚合所有表的 `fields` 信息（需扁平化处理）。
        - 列定义：字段名、所属表、逻辑视图、语义状态 (Badge)、建议角色、置信度、风险等级、操作。
        - 操作列：
            - **定位**: 跳转至逻辑视图详情页 (`DataSemanticUnderstandingView`)，模式设为 `SEMANTIC`，并自动聚焦该字段。

### 2. 状态提升与路由联动 (App.tsx)
- **需求**: 为了支持从“工作台”跳转到“逻辑视图详情页”并携带状态（Mode, FocusField），需要提升路由状态。
- **变更**:
    - 在 `App.tsx` 引入 `navigationParams` 状态。
    - 传递 `navigationParams` 给 `DataSemanticUnderstandingView`。
    - 实现 `handleNavigateToField(tableId, fieldName)` 方法，供工作台调用。

### 3. 逻辑视图适配 (DataSemanticUnderstandingView)
- **Props**: 接收 `initialFocusField` 或监听 `navigationParams`。
- **Effect**: 当检测到跳转参数时：
    - 自动切换到 `SEMANTIC` 模式。
    - 自动展开对应的 `DeepAnalysisTabs`。
    - 滚动并高亮目标字段。

### 4. 模拟数据增强
- 在 `mockData.ts` 中增强字段级数据，确保有足够的 `UNANALYZED`, `SUGGESTED`, `BLOCKED`, `HIGH_RISK` 状态的字段用于展示。

## 验证计划

1.  **入口验证**: 确保侧边栏“字段语义理解”点击后正确渲染工作台。
2.  **列表与筛选**: 验证统计卡点击能否联动筛选，验证列表数据是否准确。
3.  **跳转验证 (核心)**:
    - 在工作台点击某字段的“定位”按钮。
    - 确认页面跳转至逻辑视图。
    - 确认右侧 DecisionPanel 已打开。
    - 确认列表中的该字段被高亮显示。
4.  **批量操作**: 验证批量按钮的点击反馈（如弹窗或状态变更）。

## 阶段划分
- **阶段一**: 状态提升与路由基础设施改造。
- **阶段二**: 开发工作台 UI (Header, Filter, Table)。
- **阶段三**: 实现跨页跳转与定位逻辑。
- **阶段四**: 实现模拟的批量处理逻辑。
