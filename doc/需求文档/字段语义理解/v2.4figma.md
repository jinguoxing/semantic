
# 一、产品目标（MVP 定义）

## 1.1 目标一句话

> 在**不新增字段详情页**的前提下，让用户在**逻辑视图详情页**完成字段语义理解（AI 建议 + 人工裁决），并将结果纳入**语义版本**生效。

## 1.2 MVP 范围（明确不做什么）

**做：**

* 字段角色（Role）裁决（必选）
* 术语 / 标签的人工选择（可选）
* AI / 规则生成 Suggestion
* Decision 写入语义版本

**不做（v2.4 明确排除）：**

* 自动生效
* 复杂 Domain 推断
* 质量 / 安全规则编辑
* 独立字段详情页

---

# 二、用户使用路径（MVP）

### 路径 A（主路径，80% 用户）

```
语义治理 → 语义建模 → 逻辑视图列表
→ CTA：开始 / 继续字段语义理解
→ 逻辑视图详情页（语义理解模式）
→ 字段裁决
→ 完成 → 进入候选业务对象
```

### 路径 B（专家用户）

```
语义治理 → 语义建模 → 字段语义理解（工作台）
→ 定位字段 → 跳转逻辑视图详情（语义理解模式）
```

---

# 三、页面结构（MVP 仅 2 个页面）

---

## Page 1：逻辑视图详情页（复用 + 新增“语义理解模式”）

### 3.1 页面模式

| 模式           | 说明            |
| ------------ | ------------- |
| 浏览模式         | 现有逻辑视图详情页（默认） |
| **字段语义理解模式** | 新增，治理工作态      |

---

### 3.2 页面布局（三栏结构）

```text
┌──────────────────────────────────────────┐
│ Header：表名 + 语义建模进度条（仅语义模式） │
├──────────────┬──────────────┬────────────┤
│ 字段列表区     │ 字段上下文区 │ 语义裁决区   │
│（治理列表）   │（复用）      │（新增）     │
└──────────────┴──────────────┴────────────┘
```

---

### 3.3 Header 区（新增）

**展示内容**

* 表名
* 当前模式标识：`字段语义理解中`
* 进度：已确认 / 总字段数
* 阻塞数（可选）

**示例**

```
t_order_detail
字段语义理解中 ｜ 已确认 18 / 26 ｜ 阻塞 2
```

---

### 3.4 左侧：字段治理列表（复用 + 增强）

| 字段   | 说明                      |
| ---- | ----------------------- |
| 字段名  | 复用                      |
| 类型   | 复用                      |
| 语义状态 | 新增：未分析 / 有建议 / 已确认 / 阻塞 |
| 风险标识 | 新增：低/中/高（来自规则）          |

**交互**

* 点击字段 → 中部上下文 + 右侧裁决面板联动
* 已确认字段显示 ✔

---

### 3.5 中部：字段上下文（**完全复用现有 UI**）

**保持不变**

* 数据类型
* 示例值
* Profile
* 统计分布

> ❗ 这是保证“无割裂感”的关键区域，**不改结构、不改交互**。

---

### 3.6 右侧：语义裁决面板（核心新增）

#### 字段语义裁决内容（MVP）

| 项          | 类型 | 必选 | 说明                                               |
| ---------- | -- | -- | ------------------------------------------------ |
| 字段角色（Role） | 单选 | ✅  | Identifier / Status / Time / Measure / Attribute |
| 业务含义（术语）   | 单选 | ❌  | 绑定标准术语                                           |
| 语义标签（Tags） | 多选 | ❌  | 业务/治理标签                                          |
| 建议与证据      | 只读 | —  | 命中规则 / AI 说明                                     |

#### 操作按钮

* 【接受建议】
* 【修改并确认】
* 【拒绝】

> 点击后 → 写入 Decision（不立刻生效）

---

### 3.7 状态与校验规则（前端必须实现）

* Role 未选 → 禁止确认
* 拒绝 → 必须填写原因
* 关键字段未确认 → 页面顶部显示阻塞提示

---

## Page 2：字段语义理解工作台（新增但极简）

### 3.8 页面定位

> **跨表治理调度页，不展示字段上下文**

---

### 3.9 页面结构

```text
┌──────────────────────────────────┐
│ 筛选区（逻辑视图 / 状态 / 风险） │
├──────────────────────────────────┤
│ 字段待办列表                      │
│ 字段名｜表名｜状态｜风险｜操作   │
└──────────────────────────────────┘
```

---

### 3.10 列表操作

| 操作    | 行为                       |
| ----- | ------------------------ |
| 定位    | 跳转逻辑视图详情 → 语义理解模式 → 高亮字段 |
| 批量接受  | 仅限高置信度字段                 |
| 批量打标签 | 快速治理                     |

---

# 四、核心状态机（MVP）

### 4.1 字段语义状态

```text
UNANALYZED → SUGGESTED → DECIDED
                 ↓
              BLOCKED
```

---

### 4.2 表级聚合状态（用于列表/进度条）

| 条件            | 表状态       |
| ------------- | --------- |
| 无字段有 Decision | 未开始语义建模   |
| 存在未确认字段       | 字段语义待确认   |
| 关键字段全部确认      | 可进入候选业务对象 |

---

# 五、Figma Frame 结构（可直接给设计师）

---

## Frame 1：LogicalViewDetail_Browse

* Header
* FieldList
* FieldContext

---

## Frame 2：LogicalViewDetail_SemanticMode

* Header + SemanticProgress
* FieldList（with Status）
* FieldContext（same component）
* SemanticDecisionPanel

---

## Frame 3：SemanticDecisionPanel（组件）

* RoleSelector
* TermSelector
* TagSelector
* SuggestionEvidence
* ActionButtons

---

## Frame 4：FieldSemanticWorkbench

* FilterBar
* FieldTodoTable

---

# 六、与后端模型的直接映射（不扩表也能做）

| 前端概念 | 后端对象                            |
| ---- | ------------------------------- |
| 语义建议 | suggestion（type=FIELD_SEMANTIC） |
| 裁决   | decision                        |
| 生效   | semantic_version                |
| 状态聚合 | run + decision 聚合计算             |

---

# 七、验收标准（MVP）

* [ ] 用户不新学页面即可完成字段语义理解
* [ ] 所有裁决必须通过 Decision，不可直接生效
* [ ] 语义版本中可查到字段语义事实
* [ ] 逻辑视图列表能正确反映语义建模阶段

---

## 最后一行总结（你可以直接写在 PRD 结尾）

> 字段语义理解不是新增功能页，而是逻辑视图详情页的一种治理工作模式；
> MVP 的目标是“让裁决发生”，而不是“让智能看起来很强”。

---

