
# 字段级语义理解 · 工作台

## Page-level PRD（BizSemantic v2.4）

---

## 1. 页面基本信息

| 项    | 内容                   |
| ---- | -------------------- |
| 页面名称 | 字段级语义理解（工作台）         |
| 菜单路径 | 语义治理 → 语义建模 → 字段语义理解 |
| 页面类型 | 治理工作台 / 调度页          |
| 目标用户 | 数据治理人员 / 语义建模人员      |
| 页面角色 | **跨表字段治理调度与批量处理入口**  |

---

## 2. 页面目标与边界

### 2.1 页面目标

* 集中展示**所有待治理字段**
* 支持**批量生成语义建议**
* 支持**低风险字段的快速裁决**
* 支持**一键回到逻辑视图上下文裁决**

### 2.2 页面边界（明确不做）

* ❌ 不展示字段完整上下文（样本 / Profile）
* ❌ 不发布语义版本
* ❌ 不编辑质量 / 安全规则
* ❌ 不替代逻辑视图详情页

---

## 3. 页面整体结构

```text
┌──────────────────────────────────────────┐
│ Header：页面标题 + 统计卡 + 主操作        │
├──────────────────────────────────────────┤
│ FilterBar：范围 / 状态 / 风险 / 语义      │
├──────────────────────────────────────────┤
│ FieldTodoTable：字段待办列表              │
├──────────────────────────────────────────┤
│ Drawer（可选）：快速裁决                  │
└──────────────────────────────────────────┘
```

---

## 4. Header 区（顶部）

### 4.1 标题

* **字段语义理解（工作台）**
* 副标题（可选）：集中处理待治理字段

### 4.2 统计卡（MVP 4 个）

| 指标      | 说明                       |
| ------- | ------------------------ |
| 待确认字段   | semanticStatus ≠ DECIDED |
| 高风险字段   | riskLevel = HIGH         |
| 已确认（今日） | 当天 DECIDED 数             |
| 阻塞字段    | semanticStatus = BLOCKED |

> 点击统计卡 → 自动带过滤条件

---

### 4.3 主操作按钮（右上角）

| 按钮         | 行为                     |
| ---------- | ---------------------- |
| 批量生成字段语义建议 | 触发 run（FIELD_SEMANTIC） |
| 批量接受高置信度   | 对筛选结果执行批量 decision     |

---

## 5. FilterBar（筛选区）

### 5.1 必选筛选项（MVP）

| 筛选项  | 类型 | 说明                               |
| ---- | -- | -------------------------------- |
| 逻辑视图 | 多选 | 字段所属逻辑视图                         |
| 表名   | 搜索 | 模糊匹配                             |
| 语义状态 | 多选 | UNANALYZED / SUGGESTED / BLOCKED |
| 风险等级 | 多选 | HIGH / MEDIUM / LOW              |

### 5.2 可选筛选项（增强）

| 筛选项  | 说明     |
| ---- | ------ |
| 建议角色 | Role   |
| 术语   | termId |
| 标签   | tag    |

---

## 6. FieldTodoTable（字段待办列表）

### 6.1 列定义（MVP 定版）

| 列    | 字段              | 说明             |
| ---- | --------------- | -------------- |
| 字段名  | fieldName       | 主键             |
| 所属表  | tableName       | 可点击            |
| 逻辑视图 | logicalViewName | 可选展示           |
| 语义状态 | semanticStatus  | Badge          |
| 建议角色 | suggestedRole   | 若存在            |
| 置信度  | confidence      | 数值或等级          |
| 风险   | riskLevel       | Icon + Tooltip |
| 操作   | actions         | 见下             |

---

### 6.2 行操作（必须）

#### 操作一：定位（核心）

* 行为：

  * 打开逻辑视图详情页
  * `mode=SEMANTIC`
  * 自动选中字段
  * 打开右侧语义裁决面板

#### 操作二：快速裁决（可选）

* 打开 Drawer（不跳页）
* 支持轻量裁决（见第 7 节）

---

## 7. 快速裁决 Drawer（MVP 可选但推荐）

### 7.1 Drawer 内容

| 模块      | 说明                |
| ------- | ----------------- |
| 字段信息    | field / table（只读） |
| Role 选择 | 必选                |
| 术语选择    | 可选                |
| 标签选择    | 可选                |
| 建议与证据   | 只读                |
| 操作按钮    | 接受 / 修改 / 拒绝      |

---

### 7.2 校验规则

* Role 未选 → 禁止确认
* Reject → 必填原因
* HIGH 风险字段 → 禁止批量，只能单个裁决

---

## 8. 批量操作规则（安全边界）

### 8.1 批量生成建议

* 作用范围：当前筛选结果
* 后端：创建 run（type=FIELD_SEMANTIC）
* 前端：显示执行中状态

### 8.2 批量接受高置信度（强约束）

必须满足全部条件：

* confidence ≥ 0.90
* riskLevel ≠ HIGH
* suggestedRole ∈ 非关键角色（可配置）

---

## 9. 状态模型（前端必须遵守）

### 9.1 字段语义状态

```text
UNANALYZED → SUGGESTED → DECIDED
                   ↓
                BLOCKED
```

---

### 9.2 页面刷新策略

* decision 成功 → 行状态立即更新
* run 完成 → 状态更新为 SUGGESTED
* 筛选条件变化 → 重新拉取列表

---

## 10. 与逻辑视图详情页的关系（关键约束）

* 工作台 **不替代** 逻辑视图详情页
* 所有“需要上下文”的裁决 → 跳回逻辑视图
* 工作台 = **调度 & 批量**
* 逻辑视图详情页 = **上下文 & 精细裁决**

---

## 11. 埋点与审计（MVP）

| 行为    | 埋点                            |
| ----- | ----------------------------- |
| 打开工作台 | view_field_semantic_workbench |
| 生成建议  | run_field_semantic            |
| 单字段裁决 | decision_field_semantic       |
| 批量裁决  | batch_decision_field_semantic |
| 定位跳转  | locate_to_logical_view        |

---

## 12. 验收标准（QA Checklist）

* [ ] 工作台不展示字段样本/Profile
* [ ] 定位可正确跳转并高亮字段
* [ ] 快速裁决不绕过 decision
* [ ] 批量操作严格受限
* [ ] 与逻辑视图页面无功能重复

---

## 13. PRD 定版一句话（可直接写）

> 字段级语义理解工作台是跨表治理调度与批量处理入口，
> 真正的字段语义裁决必须在逻辑视图上下文中完成。

---


