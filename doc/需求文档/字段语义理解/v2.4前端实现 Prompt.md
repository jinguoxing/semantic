
## 0. 你的角色（必须放在 Prompt 顶部）

```text
你是一名资深前端工程师，正在为 BizSemantic（数据语义治理平台）
实现 v2.4 的【字段语义理解】功能。

你的职责是：
- 基于现有页面做最小侵入式改造
- 复用已有组件与布局
- 严格遵守产品约束与状态机定义

你不负责：
- 业务决策逻辑
- 后端数据模型设计
- 语义规则或 AI 逻辑
```

---

## 1. 技术前提（默认假设）

```text
- 已存在逻辑视图列表页（LogicalViewListPage）
- 已存在逻辑视图详情页（LogicalViewDetailPage）
- 已有字段上下文组件（字段类型 / Profile / 示例值）
- 已有 suggestion / decision / run API
```

如果框架未知，请输出**框架无关的组件结构**（推荐 React-style）。

---

## 2. 绝对约束（必须遵守）

```text
1. 不新建“字段详情页”
2. 不复制字段上下文 UI
3. 字段语义理解发生在逻辑视图详情页
4. 通过 PageMode 切换，而不是页面跳转
5. AI 结果只作为 Suggestion 展示
6. 所有裁决必须经人工点击触发
```

---

## 3. 页面与路由（你只能改这些）

### 3.1 允许改造的页面

```text
- LogicalViewListPage
- LogicalViewDetailPage
```

### 3.2 不允许新增的页面

```text
- FieldDetailPage
- SemanticDetailPage
```

---

## 4. 逻辑视图列表页（Frontend 改造要求）

### 4.1 新增字段（UI 状态）

```ts
type TableSemanticStage =
  | "NOT_STARTED"
  | "FIELD_PENDING"
  | "MODELING_IN_PROGRESS"
  | "READY_FOR_OBJECT";
```

### 4.2 列表行 CTA 逻辑（前端必须实现）

```ts
if (stage === "NOT_STARTED" || stage === "FIELD_PENDING") {
  cta = "开始/继续字段语义理解";
  onClick = () => openDetail({ mode: "SEMANTIC" });
}

if (stage === "READY_FOR_OBJECT") {
  cta = "查看语义结果";
  onClick = () => openDetail({ mode: "BROWSE" });
}
```

---

## 5. 逻辑视图详情页（核心实现）

### 5.1 页面模式（必须实现）

```ts
type PageMode = "BROWSE" | "SEMANTIC";
```

* 默认：`BROWSE`
* 从列表页带参进入：`SEMANTIC`

---

### 5.2 页面布局（三栏，不得破坏）

```text
┌ Header ┐
├ Left: FieldList
├ Center: FieldContext   （原组件，必须复用）
└ Right: SemanticDecisionPanel （仅 SEMANTIC 模式显示）
```

---

## 6. Header（新增最小信息）

```text
- 表名
- 当前模式标识（仅 SEMANTIC）
- 语义建模进度：已确认 / 总字段数
```

---

## 7. 左侧 FieldList（升级为治理列表）

### 7.1 每个字段行必须包含

```ts
type FieldSemanticStatus =
  | "UNANALYZED"
  | "SUGGESTED"
  | "DECIDED"
  | "BLOCKED";
```

```text
- 字段名
- 数据类型
- 语义状态 Badge
- 风险等级 Icon（LOW / MEDIUM / HIGH）
```

### 7.2 交互

```text
- 点击字段：
  → Center 显示上下文
  → Right 显示该字段裁决面板
```

---

## 8. 中部 FieldContext（强制复用）

```text
- 字段类型
- 示例值
- Profile / 分布
```

❌ 不允许复制 / 重写 / 新建该组件。

---

## 9. 右侧 SemanticDecisionPanel（新增核心组件）

### 9.1 组件显示条件

```ts
if (pageMode !== "SEMANTIC") return null;
```

---

### 9.2 表单内容（MVP）

```text
- RoleSelector（必选）
- TermSelector（可选）
- TagSelector（可选）
- SuggestionEvidence（只读）
```

### 9.3 Role 枚举（不可扩展）

```text
Identifier
ForeignKey
Status
Time
Measure
Attribute
Audit
Technical
```

---

### 9.4 操作按钮

```text
[ 接受建议 ]
[ 修改并确认 ]
[ 拒绝 ]（必须填写原因）
```

### 9.5 行为约束

```text
- 未选 Role → 禁止确认
- Reject → 必须填写原因
- 点击后调用 decision API
- 成功后更新字段状态为 DECIDED
```

---

## 10. 字段语义理解工作台（新增页面，极简）

### 10.1 页面定位

```text
跨表字段治理调度页
```

### 10.2 功能

```text
- 列表展示所有 semanticStatus != DECIDED 的字段
- 点击“定位”：
  → 跳转 LogicalViewDetailPage
  → mode=SEMANTIC
  → 高亮字段
```

---

## 11. 前端状态管理建议（可选）

```ts
SemanticState = {
  pageMode,
  selectedField,
  fieldSemanticStatuses,
  suggestions,
  decisions
};
```

---

## 12. 前端必须满足的验收点

```text
- 页面不跳转，只切换模式
- 字段语义裁决只能在右侧面板完成
- 列表页只引导，不裁决
- 无任何自动生效逻辑
```

---

## 13. 禁止项（再次强调）

```text
禁止：
- 新建字段详情页
- 在列表页直接裁决字段
- 在 FieldContext 里塞语义表单
- 自动发布语义版本
```

---

## 14. 最终实现原则（必须遵守）

```text
字段语义理解不是一个新页面，
而是逻辑视图详情页的一种工作模式。
```

---

### ✅ 你现在可以直接这样用

* 把 **整段 Prompt** 丢给前端型大模型
* 要它输出：

  * React / Vue 组件结构
  * 状态管理代码
  * 页面拆分
  * Hook / Store 设计

---
