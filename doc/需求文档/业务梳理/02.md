
---

## 0）业务场景描述（示例输入文本）

> 监护人在政务服务平台提交小学入学申请，填写学生及监护人信息，选择意向学校并授权核验户籍、房产（或居住证）、监护关系、预防接种等信息。教育部门在规定时限内完成资格审核；材料不全的通知补正。审核通过后进行学位分配并发送录取通知，家长按要求完成线上确认与线下报到。

---

## 1）改进后的 Top-down 识别结果（政务语义 6 类）

### A. 核心业务对象（Business Object）

1. **入学申请（EnrollmentApplication）**：一件事主对象，承载状态机
2. **学生（Student）**：被服务对象
3. **监护人（Guardian）**：申请主体
4. **学校学位（SchoolQuota）**：分配约束对象
5. **资格核验结果（EligibilityCheckResult）**：并行核验汇总对象
6. **报到记录（RegistrationRecord）**：录取后闭环对象

> UI建议：这里要“强制选择/确认”一个核心对象（默认：入学申请）。

---

### B. 业务角色（Business Role）

* **申请人**：监护人
* **服务对象**：学生
* **主管部门**：教育局/教育主管单位（审核、分配、通知）
* **数据核验协同方**：公安（户籍）、住建/不动产（房产/居住）、民政（监护关系）、卫健（接种）、人社（社保，按地区）
* **承办人员角色**（可选细分）：受理员、审核员、审批员（或“审核岗/分配岗”）

> UI建议：把“工作人员/窗口”升级为“受理岗/审核岗/分配岗”，才可落地到流程与权限。

---

### C. 业务行为（Business Action）

1. **申请提交**：填写/选择/上传/授权 → 提交
2. **并行核验**：户籍核验、居住核验、监护核验、接种核验、（社保核验）
3. **材料补正**：通知补正、补交、重新核验
4. **资格审核**：教育侧综合判定
5. **学位分配**：按规则排序/匹配学校
6. **录取通知**：发送录取/不录取结果
7. **确认与报到**：线上确认、线下报到登记
8. **申诉/复核**（建议纳入）：异议提交、复核处理

> UI建议：把动词“提交/进行”提升为“业务动作词典”，避免泛化动词污染模型。

---

### D. 业务材料/数据要素（Business Artifact）

**两类：材料（上传）与数据（授权核验）要分开。**

**材料类（上传/电子证照）**

* 学生身份证明（身份证/出生证明等，按规则）
* 监护人身份证明
* 居住类证明（房产证/居住证/租赁备案等，地区差异）
* 其他加分/优先材料（军人/人才/随迁等政策类证明）

**数据核验类（接口/共享）**

* 户籍信息（公安）
* 房产/不动产信息（住建/不动产）
* 监护关系（民政/公安辅助）
* 预防接种记录（卫健）
* 社保缴纳（人社，可选）
* 学区范围与学位余量（教育内部）

> UI建议：识别结果里要能显示“来源部门/系统 + 获取方式（材料/共享）”。

---

### E. 业务状态（Business State）——挂到“入学申请”

建议状态机（MVP可先做粗粒度）：

1. **草稿**
2. **已提交**
3. **核验中**（并行核验开始）
4. **待补正**（缺项/异常，等待用户补充）
5. **待审核**（核验通过或可审核）
6. **审核不通过**（含原因码）
7. **待分配**
8. **已录取** / **未录取**
9. **待确认**（家长确认录取）
10. **已报到**（闭环）

> UI建议：在“识别结果”区把状态输出为“状态枚举 + 触发动作”，不是单个词。

---

### F. 业务约束（Business Constraint）——你页面当前缺失但政务必备

**时限约束**

* 受理/审核承诺时限（X个工作日）
* 补正时限（用户补交的期限）
* 报到截止时间

**资格规则约束（高频）**

* 年龄规则（如年满6周岁，地区差异）
* 户籍/学区规则（本区户籍/随迁/集体户等）
* 居住规则（房产优先、租赁次之、居住证等）
* 监护规则（法定监护、父母关系等）
* 接种规则（缺失是否可先录取后补齐，地区差异）
* 学位容量约束（余量为0则不可分配）

---

## 2）“生成业务对象建议”输出（可直接落库的对象草案）

### 2.1 入学申请 EnrollmentApplication（核心对象）

**关键字段（建议）**

* application_id（申请编号）
* stage（学段：小学/初中/幼儿园）
* applicant_guardian_id（申请人）
* student_id（学生）
* target_area（报名区域/学区）
* preferred_schools（志愿列表）
* submit_time
* current_state（状态枚举）
* eligibility_result（资格核验汇总：pass/fail/pending）
* allocation_result（分配结果：school_id/none）
* reject_reason_code（失败原因码）
* deadlines（审核/补正/报到截止）

**关系**

* 1 个申请 对应 1 个学生，可有 1–2 个监护人
* 1 个申请 关联 N 个核验项（EligibilityCheckItem）
* 1 个申请 关联 1 个分配结果（Allocation）

---

### 2.2 核验项 EligibilityCheckItem（并行核验的结构化载体）

* check_type：HUKOU / RESIDENCE / PROPERTY / GUARDIANSHIP / VACCINE / SOCIAL_SECURITY
* data_source：公安/民政/卫健/住建/人社
* status：PENDING / PASS / FAIL / NEED_MATERIAL
* evidence_ref：材料ID或接口回执ID
* fail_reason_code：原因码
* checked_at

> 这张表能直接支撑“并行核验编排 + 可解释性 + 审核工作台”。

---

### 2.3 学位分配 Allocation

* allocation_id
* application_id
* rule_version
* score_detail（各维度得分，可选）
* assigned_school_id
* assigned_at
* status：PENDING / ASSIGNED / NOT_ASSIGNED

---

## 3）规则引擎（Top-down 规则骨架，便于你 DSL 落地）

### 3.1 资格准入规则（示例）

* R1：年龄满足学段要求
* R2：监护关系有效
* R3：户籍/居住满足报名区域规则
* R4：材料齐全或已授权可核验
* R5：接种记录满足要求（或允许后补）

### 3.2 分配优先级规则（示例维度）

* 房产在学区内 > 租赁备案 > 居住证
* 本区户籍 > 随迁子女（按政策）
* 多孩/人才/军人等政策加分（地区差异）
* 志愿顺序匹配
* 学位余量约束硬性过滤

> 建议把“资格准入”和“分配优先级”拆成两套规则集，便于解释与治理。

---

## 4）给你现有页面的“最小改造清单”（保证这套 Top-down 真能闭环）

1. **识别结果新增 2 个分组：**

   * 核心业务对象（必选/可编辑）
   * 业务约束（时限/条件/例外）

2. **把主体从“名词”升级为“角色”**

   * 监护人=申请人、教育局=主管、公安/卫健=核验协同方

3. **材料区拆成：上传材料 vs 授权核验数据**

   * 并强制标注“来源部门/系统”

4. **状态输出改为：状态枚举 + 触发动作**

   * 不要只给“待审核”一个词

5. **“生成业务对象建议”直接产出：**

   * 对象字段 + 状态机 + 核验项模型 + 规则骨架（至少这四件套）

---

如果你认可这版 Top-down 输出，我下一步可以继续把它“工程化”成两种交付物，你任选其一：
1）**前端识别结果区的数据结构（JSON Schema）**，研发可直接对接；
2）**你规则 DSL 的样例规则集**（资格+分配），并给出字段映射与原因码设计。
