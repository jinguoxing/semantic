# 业务梳理流程可行性分析

> 分析日期：2026-01-18
> 分析目的：评估"业务梳理"模块的流程设计是否真实可行，识别用户门槛与落地障碍

---

## 一、完整流程概览

```
场景创建 → 模板配置 → AI 识别 → 候选确认 → 业务建模 → 校验 → 发布
```

---

## 二、✅ 可行且价值高的部分

| 环节 | 可行性 | 价值 | 说明 |
|------|--------|------|------|
| **场景描述输入** | ✅ 高 | ⭐⭐⭐ | 自然语言描述业务是用户熟悉的方式 |
| **模板选择** | ✅ 高 | ⭐⭐⭐⭐ | 政务/企业HR/供应链的分类很清晰，能引导用户 |
| **AI 识别 → JSON输出** | ✅ 可行 | ⭐⭐⭐⭐⭐ | GPT-4 完全能输出结构化 JSON |
| **状态机生成** | ✅ 可行 | ⭐⭐⭐⭐ | 从业务描述推断状态流转是成熟的 NLP 任务 |
| **候选采纳/编辑 UI** | ✅ 已实现 | ⭐⭐⭐⭐ | 页面已有类似交互 |

---

## 三、⚠️ 存在门槛/需要优化的部分

### 3.1 用户认知门槛：什么是"业务对象"？

> **痛点**：普通业务人员不理解"业务对象"、"状态机"、"业务行为"这些术语。

| 术语 | 用户可能的理解 | 建议优化 |
|------|---------------|---------|
| 业务对象 | "表？实体？不懂" | 改称"核心数据实体" + 给出例子（如"入学申请单"） |
| 状态机 | "什么机？" | 改称"流程状态" + 可视化流转图 |
| 业务行为 | "动作？操作？" | 改称"关键操作步骤" |

**建议**：在每个卡片区增加 **Tooltip** 或 **示例卡片**，让业务人员"一看就懂"。

---

### 3.2 场景描述质量不可控

> **痛点**：用户写的描述可能过于笼统（如"办理小学入学"）或过于冗长。

**现实情况**：
- 太短 → AI 识别不出完整对象/状态
- 太长 → AI 置信度下降 + 生成结果杂乱

**建议**：
1. **增加「描述质量检测」**：字数不足时提示"建议补充更多业务细节"
2. **提供示例模板**：点击"查看示例"可填充一段高质量描述
3. **分段引导**：让用户分别描述"谁、做什么、需要什么材料、经过哪些审批"

---

### 3.3 AI 识别结果的置信度与覆盖率

> **痛点**：用户不知道"87% 置信度"意味着什么，该信还是不该信？

**建议**：
- **置信度 < 70%** 的项目标记为 `⚠️ 建议人工确认`
- **覆盖率 < 80%** 时弹出提示："您的描述可能遗漏了部分业务细节"
- 增加 **"AI 解释"** 面板：点击任意候选项，显示"为什么 AI 这样识别"

---

### 3.4 模板强制项的门槛

> **痛点**：政务模板要求"法定时限"、"原因码"等，但业务人员可能根本不知道这些概念。

文档中的 `required_items` 包括：
```json
["primary_business_object", "state_machine", "reason_code", "statutory_time_limit"]
```

**问题**：
- "法定时限"需要查政务规范文件，业务人员不一定知道
- "原因码"需要定义拒绝原因体系，这是治理层面的工作

**建议**：
1. **提供预置模板**：政务场景自动填充常见时限（如"5 个工作日"）
2. **智能提示**：AI 从描述中提取"在规定时限内"并自动建议值
3. **允许"暂不配置"**：用 `suggested` 状态替代强制，发布时再校验

---

### 3.5 候选采纳后的编辑复杂度

> **痛点**：用户采纳了 AI 推荐的"入学申请"对象，但需要手动添加 10+ 个字段，这太繁琐。

**建议**：
1. **AI 生成字段建议**已在文档中（`object_fields_suggested`），需要 **前端可视化**
2. **快捷操作**："一键采纳全部字段"
3. **字段模板库**：常见对象（用户、订单、审批单）预置字段

---

### 3.6 状态机的可视化与编辑

> **痛点**：状态机的 `transitions` 是 JSON 数组，用户无法直观理解和编辑。

**当前文档数据示例**：
```json
{ "from_state": "VERIFYING", "to_state": "NEED_SUPPLEMENT", "trigger_action": "RequestSupplement" }
```

**建议**：
1. **必须有可视化流程图**（Mermaid / React Flow）
2. **拖拽编辑**：允许用户拖动状态、连线
3. **校验提示**：检测"孤立状态"（没有进入或退出的状态）

---

## 四、🚫 不可落地/需要较大改造的部分

### 4.1 多部门核验的真实集成

文档设计了：
```json
{ "check_type": "HUKOU", "data_source_org": "公安", "access_mode": "authorized_query" }
```

**现实障碍**：
- 公安、民政、卫健的数据接口需要政务云对接
- 不是产品层面能解决的，依赖客户的政务数字化基础

**建议**：
- MVP 阶段："核验"仅作为**流程节点定义**，不做真实调用
- 提供 `mock` 模式用于演示

---

### 4.2 规则引擎的 DSL 执行

文档中定义了规则表达式：
```json
{ "rule_expression": "all(check.status == 'PASS')" }
```

**问题**：
- 这需要一个**规则执行器**（如 Drools、Rete、或自研 JS 求值器）
- 当前产品无此基础设施

**建议**：
- **Phase 1**：规则仅作为"文档记录"，不执行
- **Phase 2**：接入规则引擎，支持模拟运行

---

### 4.3 发布后的"语义版本"与下游消费

> **痛点**：发布的业务模型，谁来用？怎么用？

**文档中的设计**：
```json
{ "artifacts": ["business_object_schema", "state_machine", "rule_pack"] }
```

**现实问题**：
- 下游系统（表单引擎、流程引擎、BI）需要能解析这些 schema
- 没有下游对接 = 这个产品只是"高级文档编辑器"

**建议**：
- **MVP**：先支持"导出 JSON"供开发者手动使用
- **中期**：对接表单设计器、流程设计器
- **长期**：真正的"语义驱动开发"（Schema → 自动生成代码/表单）

---

## 五、📋 用户旅程中的关键门槛点

```mermaid
graph LR
    A[创建场景] -->|门槛1: 写不出高质量描述| B[选择模板]
    B -->|门槛2: 不理解增强能力含义| C[开始识别]
    C -->|门槛3: 不知道如何判断置信度| D[采纳候选]
    D -->|门槛4: 不会编辑字段/状态机| E[建模]
    E -->|门槛5: 不懂如何补全强制项| F[校验]
    F -->|门槛6: 发布后不知道怎么用| G[发布]
```

---

## 六、✅ 推荐的 MVP 落地路径

| 优先级 | 功能 | 精简方案 |
|--------|------|----------|
| **P0** | 场景 + 描述 + 模板选择 | 已有，完善即可 |
| **P0** | AI 识别 → 候选列表 | 调用 GPT-4 + JSON Schema 校验 |
| **P1** | 候选采纳 → Working Copy | 存入 localStorage/数据库 |
| **P1** | 状态机可视化 | React Flow 或 Mermaid 只读渲染 |
| **P2** | 字段编辑器 | 表格编辑 + 类型下拉 |
| **P2** | 校验提示 | 模板强制项 vs 当前模型的 diff |
| **P3** | 规则执行 | 暂不实现，仅记录规则文本 |
| **P3** | 多部门核验真实调用 | Mock 模式 |

---

## 七、最终结论

| 维度 | 评估 |
|------|------|
| **流程完整性** | ✅ 设计完整，从描述到发布有清晰链路 |
| **技术可行性** | ✅ AI 识别、JSON 交互、前端渲染均可实现 |
| **用户门槛** | ⚠️ 较高，需要术语优化 + 示例引导 + 可视化 |
| **真实落地** | ⚠️ 规则执行、多部门核验需要基础设施支撑 |
| **商业价值** | 🚀 如果能打通下游（表单/流程），价值极高 |

---

## 八、下一步行动建议

1. **降低术语门槛**：重命名专业术语 + 增加示例和 Tooltip
2. **增加可视化**：状态机流程图、对象关系图
3. **明确下游消费场景**：定义"发布后"数据如何被表单/流程/BI 系统使用
4. **分阶段实现**：先做 P0/P1，验证用户接受度后再做完整版

---

> **总结**：流程设计是可行的，但需要**降低术语门槛 + 增加可视化 + 明确下游消费场景**，否则会变成"看起来很厉害但不知道怎么用"的工具。
