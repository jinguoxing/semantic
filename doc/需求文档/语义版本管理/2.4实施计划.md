# 实施计划 - 语义版本管理 (v2.4)

## 目标
实现“语义版本管理”模块，提供对语义建模结果（业务对象、字段语义、规则等）的快照、发布、回滚及差异对比功能。核心设计理念是**复用现有组件，通过 `Version Context` 控制“工作态”与“版本态”**。

## 需要用户评审
> [!IMPORTANT]
> **版本上下文 (Version Context)**: 我们将引入一个全局或页面级的 Context 来控制当前视图是处于“可编辑的工作态”还是“只读的版本快照态”。所有涉及编辑的组件（如 `BusinessModelingView`）都需要适配此 Context。

## 拟定变更

### 1. 新增页面：SemanticVersionView
- **位置**: `src/views/SemanticVersionView.tsx`
- **功能**:
    - **列表页 (List)**: 展示语义版本列表，支持筛选（状态、范围等）和操作（查看、Diff、回滚）。
    - **详情页 (Detail)**: 展示特定版本的详细快照信息。包含以下 Tabs：
        1.  **对象快照 (Object Snapshot)**: 复用 `BusinessModelingView`，但处于只读模式。
        2.  **字段语义快照 (Field Semantic)**: 复用 `DataSemanticUnderstandingView` (部分)，展示字段语义快照列表。
        3.  **质量 & 安全 (Quality & Security)**: 展示规则和策略快照。
        4.  **下游绑定 (Binding)**: 展示版本与下游应用的绑定关系。
        5.  **版本对比 (Diff)**: 展示与上一版本的差异。

### 2. 状态管理与路由
- **Types**: 定义 `SemanticVersion` 类型 (Draft, Published, Deprecated, Rolled Back)。
- **App.tsx**: 添加 `semantic_version` 路由。
- **Context**: 创建 `SemanticVersionContext` 或使用 Props 传递 `versionMode` (boolean)。

### 3. 组件复用与适配
- **BusinessModelingView**:
    - 新增 Props: `readOnly?: boolean`, `versionId?: string`。
    - 在 `readOnly` 模式下，禁用拖拽、编辑、保存等操作，展示“快照”标记。
- **DataSemanticUnderstandingView**:
    - 同样适配 `readOnly` 模式，用于在“字段语义快照”Tab 中展示数据。

### 4. 模拟数据 (Mock Data)
- 在 `src/data/mockData.ts` 中添加 `mockSemanticVersions` 数据，包含不同状态的版本记录及其快照数据。

## 验证计划

### 手动验证
1.  **列表页验证**:
    - 进入“语义版本”菜单，确认列表展示正确。
    - 验证筛选功能（状态、创建人等）。
2.  **详情页验证**:
    - 点击版本进入详情页。
    - **对象快照**: 确认看到的是“只读”的业务对象视图，无法编辑。
    - **字段语义**: 确认展示字段列表及语义信息。
    - **其他 Tabs**: 确认内容展示符合 Mock 数据。
3.  **版本切换验证**:
    - (可选) 在详情页切换不同版本，确认数据刷新。

## 阶段划分
- **阶段一**: 搭建框架 (列表页 + 详情页 Header + Tabs 结构)。
- **阶段二**: 实现对象快照 (复用适配 `BusinessModelingView`)。
- **阶段三**: 实现其他快照 Tabs (字段、质量/安全、绑定)。
- **阶段四**: 实现 Diff 视图与发布/回滚交互。
