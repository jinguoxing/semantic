# 语义理解 V2 - 一体化精简设计

> 基于 V1 优化，解决信息割裂、空间占用过大问题

---

## 🎯 设计目标

1. **消除割裂感**：将 Tabs 整合进 SemanticAnalysisCard
2. **减少冗余**：移除重复的"语义维度" Tab
3. **压缩空间**：双维度面板改为单行摘要 + 可展开
4. **先分析后结论**：符合用户心智模型

---

## 📐 V2.1 UI 结构 (最新)

```
┌─────────────────────────────────────────────────────────────────────┐
│ ← t_order_main  MySQL  订单交易主表       [返回列表] [✨ 重新理解]    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ✨ 语义理解引擎                                                    │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                                     │
│  📊 表维度: 0.75 (4/4通过)  │  🔤 字段维度: 0.85 (3/3通过)   [▶ 展开] │
│                                                                     │
│  ─────────────────────────────────────────────────────────────────  │
│  深入分析  [字段结构(12)] [关系图谱(3)] [质量概览]                  │
│  ├──────────────────────────────────────────────────────────────── │
│  │  字段名      类型          语义角色    敏感等级   质量           │
│  │  order_id    varchar(32)   标识符      L1         A             │
│  │  user_id     bigint        标识符      L2 ⚠      A             │
│  │  ...                                                            │
│  └──────────────────────────────────────────────────────────────── │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────────┐│
│  │ 🎯 综合语义结论                                 置信度: 0.89    ││
│  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ ││
│  │ 识别业务: 订单主表                                              ││
│  │ 业务描述: 核心业务实体，代表订单信息。包含关键标识符和状态信息。 ││
│  │ 理解依据: [表名对应业务概念] [包含有效主键] [字段分布符合实体模式]││
│  │                                                                 ││
│  │                    [忽略]  [修正结果]  [✓ 确认并生成逻辑实体]   ││
│  └─────────────────────────────────────────────────────────────────┘│
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 🔄 V2 → V2.1 核心变更

| 项目 | V2 | V2.1 |
|------|-----|------|
| **双维度面板** | 左右两个大卡片，占 40% 空间 | 压缩为单行摘要，可展开 |
| **规则详情** | 始终展示 4 条规则 | 默认隐藏，点击"展开"查看 |
| **未通过项** | 混在列表中 | 单独高亮显示 |
| **空间占用** | ~300px 高度 | ~50px 高度 (折叠态) |

---

## 📋 压缩后的维度摘要

### 折叠态 (默认)

```
📊 表维度: 0.75 (4/4通过)  │  🔤 字段维度: 0.85 (3/3通过)   [▶ 展开]
```

### 有问题时

```
📊 表维度: 0.00 (2/4通过)  │  🔤 字段维度: 0.85 (3/3通过)   [▶ 展开]
⚠️ 未通过: 主键检测, 生命周期
```

### 展开态 (点击后)

```
📊 表维度: 0.00 (2/4通过)                      [▼ 收起]
├─ T-01 表名归纳    弱语义     ✓
├─ T-02 主键检测    缺失       ✗
├─ T-03 生命周期    缺失       ✗
└─ T-04 类型排查    非业务表   ✗

🔤 字段维度: 0.85 (3/3通过)
├─ D-01 关键字段占比  0/0   ✓
├─ D-04 敏感字段检测  0个   ✓
└─ D-02 命名规范度    高    ✓
```

---

## 🎨 用户价值分析

| 用户类型 | 关心程度 | 推荐展示 |
|---------|---------|---------|
| **普通业务用户** | ❌ 不关心 | 只看摘要行即可 |
| **数据治理专家** | ⚠️ 偶尔关心 | 需要时点击展开 |
| **异常排查** | ✅ 关心 | 自动高亮未通过项 |

---

## 🔧 实现要点

### 组件结构 (V2.1)

```tsx
// SemanticAnalysisCard.tsx (V2.1)
<Card>
  {/* 【压缩】维度摘要行 */}
  <DimensionSummary 
    tableScore={0.75}
    tablePassed={4}
    tableTotal={4}
    fieldScore={0.85}
    fieldPassed={3}
    fieldTotal={3}
    failedRules={['主键检测', '生命周期']}
    onExpand={() => setShowDetails(true)}
  />

  {/* 【可选】展开详情 */}
  {showDetails && <DimensionDetails rules={...} />}

  {/* 深入分析 Tabs */}
  <DeepAnalysisTabs>
    <Tab name="字段结构">...</Tab>
    <Tab name="关系图谱">...</Tab>
    <Tab name="质量概览">...</Tab>
  </DeepAnalysisTabs>

  {/* 综合语义结论 (高亮边框) */}
  <ConclusionSection />
</Card>
```

---

## ✅ 预期效果

- **节省空间 ~60%**：维度面板从 ~300px → ~50px
- **首屏聚焦结论**：用户直接看到最终结果
- **按需深入**：有需要时点击展开规则详情
- **异常高亮**：未通过的规则自动提示
