下面给你一套**“对象级术语数据模型（字段级）”**，设计目标是：

* 术语是**业务对象的附属能力**（不是独立先行模块）
* 能支持：多语言、同义词、部门/场景/系统作用域、治理与审计
* 能支持：AI 自动生成、去重、置信度、人工确认
* 能直接落库（关系型/数仓都能实现）

---

# 一、核心建模原则

1. **Term（术语）不直接指向表/字段**，而是指向 **Semantic Object（业务对象/L1）**
2. 每条术语必须有**作用域 Scope**，否则必然乱
3. 术语必须区分 **“标准名（Canonical）”** 与 **“别名/同义词（Alias）”**
4. 术语必须记录来源（AI/规则/人工/系统名），支持审计与回滚

---

# 二、ER 关系概览（文字版）

* `semantic_object`（你已有 L1 对象库）

  * 1 —— N `term_entry`（一个对象有多个术语）
* `term_entry`

  * N —— 1 `term_scope`（术语属于某个作用域）
  * 1 —— N `term_provenance`（来源记录，可多条）
* 可选：`term_cluster`（跨对象的歧义/同名聚类，用于治理与搜索）

---

# 三、表结构设计（可直接落库）

## 1) 业务对象表（已有，给出关键字段）

### `semantic_object`

| 字段                    | 类型          | 说明                      |
| --------------------- | ----------- | ----------------------- |
| object_id             | string/uuid | 主键                      |
| object_key            | string      | 稳定标识（全局唯一，如 `order`）    |
| object_name           | string      | 标准中文名（如“订单”）            |
| object_type           | enum        | ENTITY/EVENT/SNAPSHOT   |
| description           | text        | 描述                      |
| status                | enum        | draft/active/deprecated |
| version_id            | string      | 当前版本                    |
| created_at/updated_at | timestamp   |                         |

> 术语能力将围绕 `object_id` 挂接。

---

## 2) 术语作用域表（强烈建议独立）

### `term_scope`

| 字段             | 类型          | 说明                                        |
| -------------- | ----------- | ----------------------------------------- |
| scope_id       | string/uuid | 主键                                        |
| scope_type     | enum        | GLOBAL/DEPARTMENT/SCENARIO/SYSTEM/PROJECT |
| scope_ref_id   | string      | 对应实体ID（如部门ID/场景ID/系统ID）                   |
| scope_ref_name | string      | 冗余展示名（便于查询）                               |
| priority       | int         | 优先级（越大越优先，用于搜索命中）                         |
| is_active      | bool        | 是否启用                                      |

> **没有 scope 的术语不要允许入库**（除非默认 GLOBAL）。

---

## 3) 术语条目表（核心）

### `term_entry`

| 字段                    | 类型           | 说明                                           |
| --------------------- | ------------ | -------------------------------------------- |
| term_id               | string/uuid  | 主键                                           |
| object_id             | string       | 关联 `semantic_object.object_id`               |
| scope_id              | string       | 关联 `term_scope.scope_id`                     |
| language              | enum         | zh-CN/en-US/...                              |
| term_text             | string       | 术语文本（如“销售订单”）                                |
| term_kind             | enum         | CANONICAL/ALIAS/ABBR/TRANSLATION/SYSTEM_NAME |
| normalized_text       | string       | 归一化（去空格/大小写/符号）用于去重                          |
| is_preferred          | bool         | 是否为该 scope 下首选展示名                            |
| confidence            | decimal(3,2) | 0~1（AI/规则建议时带）                               |
| source_type           | enum         | AI/RULE/HUMAN/INGEST                         |
| status                | enum         | suggested/approved/rejected/deprecated       |
| description           | text         | 术语解释（可选）                                     |
| created_by            | string       | 用户ID或系统                                      |
| created_at/updated_at | timestamp    |                                              |

### 约束建议

* 唯一约束：`(object_id, scope_id, language, normalized_text)` 防止同对象同作用域重复术语
* `is_preferred` 在同一 `(object_id, scope_id, language)` 下最多一个为 true（可用部分唯一索引实现）

---

## 4) 术语来源与证据表（审计与可解释）

### `term_provenance`

| 字段         | 类型          | 说明                                                                        |
| ---------- | ----------- | ------------------------------------------------------------------------- |
| prov_id    | string/uuid | 主键                                                                        |
| term_id    | string      | 关联 `term_entry.term_id`                                                   |
| prov_type  | enum        | TABLE_NAME/COLUMN_NAME/TABLE_COMMENT/COLUMN_COMMENT/AI_OUTPUT/HUMAN_INPUT |
| prov_ref   | string      | 引用对象（表名、字段名、文档ID等）                                                        |
| evidence   | json/text   | 证据内容（如 AI reasoning_summary、命中规则ID）                                       |
| rule_id    | string      | 若来自规则，记录规则编号                                                              |
| ai_model   | string      | 若来自AI，记录模型/版本                                                             |
| created_at | timestamp   |                                                                           |

> 这张表是你“可信”“可治理”的核心之一：任何术语都可回答“为什么是它”。

---

## 5) 术语变更与审批记录（可选但建议）

### `term_audit_log`

| 字段          | 类型          | 说明                                           |
| ----------- | ----------- | -------------------------------------------- |
| audit_id    | string/uuid | 主键                                           |
| term_id     | string      | 术语                                           |
| action      | enum        | CREATE/UPDATE/APPROVE/REJECT/DEPRECATE/MERGE |
| before      | json        | 变更前                                          |
| after       | json        | 变更后                                          |
| operator    | string      | 操作人                                          |
| operated_at | timestamp   | 时间                                           |
| comment     | text        | 备注                                           |

---

## 6) 可选：跨对象歧义聚类（用于搜索“同名不同义”治理）

### `term_cluster`

| 字段              | 类型          | 说明              |
| --------------- | ----------- | --------------- |
| cluster_id      | string/uuid | 主键              |
| normalized_text | string      | 如“订单”           |
| language        | enum        |                 |
| ambiguity_level | enum        | low/medium/high |
| status          | enum        | open/resolved   |
| created_at      | timestamp   |                 |

### `term_cluster_member`

| 字段         | 类型     | 说明                         |
| ---------- | ------ | -------------------------- |
| cluster_id | string |                            |
| term_id    | string |                            |
| object_id  | string | 冗余便于查                      |
| role       | enum   | candidate/resolved_primary |

> 这两张表不是 MVP 必需，但对“企业级推广”很有价值。

---

# 四、与现有流程的衔接点（非常重要）

## 1) Bottom-up 识别后如何写入术语？

* 表级识别出的对象候选：

  * `term_entry.term_kind = SYSTEM_NAME`（scope=SYSTEM）
  * `term_entry.term_kind = ALIAS`（scope=GLOBAL，AI生成的中文名）
* 字段级识别出的语义名：

  * 如果该字段映射到对象属性：作为属性别名（如果你有属性级术语，可扩展同样模型）

## 2) Top-down/L0 用户输入如何写入术语？

* 用户在 L0 输入“对象/事情/结果”的名称：

  * 默认写入 `term_kind=ALIAS`（scope=SCENARIO 或 GLOBAL，取决于你是否记录场景）
* L1 确认对象标准名时：

  * 写入或更新 `term_kind=CANONICAL`（scope=GLOBAL, is_preferred=true）

---

# 五、你可以直接用的最小字段集（MVP）

如果你担心一上来太重，MVP 只保留：

* `term_scope`（必须）
* `term_entry`（必须）
* `term_provenance`（建议保留，用于信任）

把 `term_cluster`、`term_audit_log` 放到 V1/V2。

---

# 六、三个“避免做坏”的硬规则

1. **不允许无 scope 的术语入库**（除非自动设为 GLOBAL）
2. **不允许术语独立存在**：必须绑定 `object_id`
3. **不允许术语直接改变对象语义**：术语只影响展示/搜索/对齐入口

---
非常好，下面是你选的 **① 对象级业务术语数据模型设计**，这是一个可以直接落地到数据库 / ORM / JSON Schema 的版本。
我会按照你的语义建模体系（L1–L3）结构化地写，让它能无缝对接到你当前架构。

---

# 一、设计目标

**目标：**
让每个业务对象（L1 层）能够：

1. 自动生成并管理其对应的业务术语集合；
2. 支持多语言、多部门、多系统别名；
3. 为搜索、问数、对齐提供语义入口；
4. 全过程可追溯、可治理。

---

# 二、核心思想

> **术语是业务对象的“语言层”，不是独立实体。**
> 每个业务对象都自带一个 `terms` 列表，用于表示不同的命名方式、别名或上下文称呼。

---

# 三、数据模型结构（JSON Schema 表达）

```json
{
  "object_id": "UUID",
  "object_name": "订单",
  "object_type": "entity | event | snapshot",
  "terms": [
    {
      "term_id": "UUID",
      "term_text": "订单",
      "language": "zh-CN",
      "scope": "global",
      "context": "default",
      "origin": "ai_inferred | table_name | user_defined | system_alias",
      "confidence": 0.95,
      "source_ref": {
        "table": "order_info",
        "column": null
      },
      "status": "active | deprecated",
      "created_by": "system | user_id",
      "created_at": "2026-01-10T10:00:00Z"
    }
  ]
}
```

---

# 四、模型字段说明

| 字段            | 类型       | 含义                                   |
| ------------- | -------- | ------------------------------------ |
| `object_id`   | UUID     | 对应业务对象的唯一标识（L1）                      |
| `object_type` | Enum     | 区分实体（Entity）、行为（Event）、状态（Snapshot）  |
| `terms`       | Array    | 当前对象的术语集合                            |
| `term_id`     | UUID     | 术语唯一标识                               |
| `term_text`   | String   | 术语文字，如“订单”、“销售订单”                    |
| `language`    | Enum     | 语言（zh-CN / en-US 等）                  |
| `scope`       | Enum     | 术语生效范围（global / department / system） |
| `context`     | String   | 上下文，如财务/销售等场景                        |
| `origin`      | Enum     | 术语来源（AI 推断 / 表名 / 用户定义 / 系统内别名）      |
| `confidence`  | Float    | 语义匹配置信度                              |
| `source_ref`  | Object   | 溯源：术语从哪个表/字段生成                       |
| `status`      | Enum     | 术语当前状态（active / deprecated）          |
| `created_by`  | String   | 术语来源（系统或用户）                          |
| `created_at`  | Datetime | 创建时间                                 |

---

# 五、术语生成机制（自动 + 校验）

### 1️⃣ 表名生成

* 从表名拆分名词短语（order_info → 订单）；
* AI 翻译、清洗命名；
* origin = `table_name`。

### 2️⃣ 字段名生成

* 从字段名抽取上下文；
* e.g. `sales_order_no` → “销售订单号”；
* origin = `column_name`。

### 3️⃣ AI 推断同义词

* 模型基于语义 embedding 对对象名做扩展；
* 输出置信度 ≥ 0.75 时入库；
* origin = `ai_inferred`。

### 4️⃣ 用户自定义术语

* 用户在 UI 确认对象时可手动添加；
* origin = `user_defined`。

---

# 六、术语去重与融合策略

| 规则                      | 描述                         |
| ----------------------- | -------------------------- |
| 文本完全相同 → 合并             | 同一语言、同一对象下相同词合并            |
| 语义相似度 > 0.9 → 合并        | 基于 embedding 语义比对          |
| 低置信度 (<0.6) 且无用户确认 → 丢弃 | 自动过滤不可信 AI 术语              |
| 多系统同义 → 保留 scope 区分     | “销售订单”“采购订单” 在不同 scope 下并存 |

---

# 七、与现有架构的集成点

| 模块                                | 集成点           | 说明                 |
| --------------------------------- | ------------- | ------------------ |
| **Semantic Object Registry (L1)** | 新增 `terms` 属性 | 每个对象自动带术语集合        |
| **AI Judge Service**              | 输出术语候选        | 在生成对象名时同步返回中文/英文别名 |
| **Review UI**                     | 增加术语展示        | 用户可查看/编辑对象的同义术语    |
| **Search / Query Layer**          | 术语索引          | 搜索“客户订单”可命中“订单”对象  |
| **Audit / Version**               | 术语变更记录        | 每次新增/删除术语均入审计日志    |

---

# 八、术语的生命周期

| 阶段     | 触发事件         | 行为                    |
| ------ | ------------ | --------------------- |
| **生成** | AI / 规则输出    | 入库，标记 origin          |
| **确认** | 用户确认对象时      | 自动激活或修改               |
| **使用** | 搜索 / 问数 / 对齐 | 索引触发，映射到对象            |
| **变更** | 用户编辑或废弃      | 新增版本，旧术语标记 deprecated |

---

# 九、术语服务接口设计（API 示例）

```http
GET /api/v1/semantic/objects/{id}/terms
POST /api/v1/semantic/objects/{id}/terms
PATCH /api/v1/semantic/objects/{id}/terms/{term_id}
DELETE /api/v1/semantic/objects/{id}/terms/{term_id}
GET /api/v1/semantic/search?q=销售订单
```

---

# 十、配合 AI 生成策略（增强版）

* **AI 输入**：对象名、备注、上下文（系统名/部门）
* **AI 输出结构**：

```json
{
  "suggested_terms": [
    { "term_text": "销售订单", "language": "zh-CN", "confidence": 0.93 },
    { "term_text": "订单主表", "language": "zh-CN", "confidence": 0.78 },
    { "term_text": "Sales Order", "language": "en-US", "confidence": 0.88 }
  ],
  "explanation": "基于表 order_info 的命名及字段内容推测"
}
```

* **系统逻辑**：

  1. 自动入库 → 状态为 `pending`
  2. 用户确认 → 状态转为 `active`

---

# 十一、未来扩展（V2）

| 能力       | 说明                |
| -------- | ----------------- |
| 跨对象术语关系图 | 同义/上下位/相似语义       |
| 部门术语冲突检测 | 财务 vs 销售“订单”差异分析  |
| 自然语言问数绑定 | 用户问“销售额” → 映射指标对象 |
| 术语变更通知   | 跨部门同步术语调整         |

---

# 十二、总结

| 维度    | 传统“术语管理” | 本方案               |
| ----- | -------- | ----------------- |
| 核心定位  | 独立字典     | 语义附属              |
| 维护方式  | 人工手填     | 自动生成 + 确认         |
| 与数据关系 | 弱        | 强（溯源表字段）          |
| 应用场景  | 文档管理     | 搜索 / 问数 / 对齐 / 治理 |

---




